<div class="hs-overlay-animation-target hs-overlay-open:scale-100 hs-overlay-open:opacity-100 scale-95 opacity-0 ease-in-out transition-all duration-200 sm:max-w-lg sm:w-full m-3 sm:mx-auto min-h-[calc(100%-56px)] flex items-center">
  <div class="w-full flex flex-col bg-white border border-gray-200 shadow-2xs rounded-xl pointer-events-auto">

    <!-- Encabezado -->
    <div class="flex justify-between items-center py-3 px-4 border-b border-gray-200">
      <h3 id="modal-add-task-label" class="font-bold">
        Cargar Archivos
      </h3>
      <button type="button" class="size-8 inline-flex justify-center items-center gap-x-2 rounded-full border border-transparent text-gray-800 hover:bg-gray-200 focus:outline-hidden focus:bg-gray-200 disabled:opacity-50 disabled:pointer-events-none" aria-label="Close" data-hs-overlay="#modal-upload-file">
        <span class="sr-only">Close</span>
        <svg class="shrink-0 size-5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18 6 6 18"></path>
          <path d="m6 6 12 12"></path>
        </svg>
      </button>
    </div>

    <!-- Contenido -->
    <div class="px-4 py-4 flex flex-col overflow-y-auto max-h-[30rem] h-full">

      <div class="border-2 border-dashed rounded-lg p-6 py-10 text-center cursor-pointer border-gray-300"
          (click)="fileInput.click()"
          (dragover)="onDragOver($event)"
          (dragleave)="onDragLeave($event)"
          (drop)="onDrop($event)">
        <input #fileInput type="file" multiple (change)="onFileSelected($event)" class="hidden" />
        <div class="flex flex-col items-center">
          <div class="mb-4 p-5 rounded-full bg-gray-100">
            <lucide-icon [name]="Upload" class="size-6 text-gray-800" />
          </div>
          <p class="text-sm mb-1">Arrastra tu archivo aquí o <span class="text-primary underline font-semibold">navega</span></p>
        </div>
      </div>

      <div *ngFor="let f of files" class="border space-y-2 mt-3 border-gray-200 rounded-md p-3">
        <article class="flex items-center justify-between ">
          <div class="flex items-center gap-3">
            <div class="p-2 border border-gray-200 rounded-lg">
              <lucide-icon [name]="File" class="size-4 text-gray-800 " />
            </div>
            <div>
              <p class="text-sm line-clamp-1 text-gray-900">{{ f.file.name }}</p>
              <p class="text-xs text-gray-600">{{ formatSize(f.file.size) }}</p>
            </div>
          </div>
          <button (click)="removeFile(f.id)" class="text-gray-400 hover:text-red-600">
            <lucide-icon [name]="Trash" class="size-4 text-gray-800 " />
          </button>
        </article>
        <div [style.width.%]="f.progress" class="bg-primary rounded-full h-1.5 transition-all"></div>
      </div>

    </div>

    <!-- Botones de acción -->
    <div class="flex justify-center items-center gap-x-2 py-3 px-4 border-t border-t-gray-200">
      <button type="button" class="btn-primary"
      data-hs-overlay="#modal-upload-file">
        Subir archivos
      </button>
    </div>

  </div>
</div>

